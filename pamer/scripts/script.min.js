(function(){let a=Bahasa[bahasa].pamerin;const e=document.querySelector(".container"),t=t=>{const n=document.createElement("div");n.classList.add("Pamer"),n.innerHTML=`\n            <div class="header">\n                <button data-button="kembali-pamer">\n                    <i class="fa-solid fa-chevron-left"></i>\n                </button>\n                <h3 class="judul">${a.title} | Ucapin</h3>\n                <button data-button="bikin-pamerin">\n                    <i class="fa-solid fa-plus"></i>\n                </button>\n            </div>\n            <div class="main" data-content="list-kartu">\n                LOADING . . .\n            </div>\n            <button class="bikin-btn" data-button="buat-pamerin"><i class="fa-solid fa-plus"></i> ${a.create}</button>\n        `,e.innerHTML="",e.appendChild(n),n.querySelector('[data-button="kembali-pamer"]').onclick=(()=>window.location.href=`${window.location.origin}/meja/`);const i=n.querySelector('[data-content="list-kartu"]');n.querySelector('[data-button="bikin-pamerin"]').onclick=(()=>r(i,t)),n.querySelector('[data-button="buat-pamerin"]').onclick=(()=>r(i,t)),l(i,t)};let n=null;const r=(t,r)=>{const o=document.createElement("div");o.classList.add("Komentar"),o.innerHTML=`\n            <div class="komen-box">\n                <div class="komen-atas">\n                    <div data-kartu="author">\n                        ${a.create}\n                    </div>\n                    <button data-button="kembali"><i class="fa-solid fa-chevron-left"></i></button>\n                </div>\n                <div class="kolom-kartu" data-kartu="kolom-kartu">\n                    LOADING . . .\n                </div>\n                <div class="komen-bawah">\n                    <button class="kirim-kartu" data-button="kirim-kartu">Submit</button>\n                </div>\n            </div>\n        `;const l=o.querySelector('[data-kartu="kolom-kartu"]'),d=o.querySelector('[data-button="kirim-kartu"]');o.querySelector('[data-button="kembali"]').onclick=(()=>{n=null,o.remove()}),e.appendChild(o),i(l,d,o,t,r)},i=(e,t,r,i,l)=>{e.innerHTML="",rdb.ref("rabmaGutrak").once("value",a=>{a.exists()&&a.forEach(a=>{const r=a.val(),i=document.createElement("button");i.classList.add("kartu"),i.innerHTML='<h3 class="judul">LOADING</h3>\n                    <p class="deskripsi">Loading</p>',i.querySelector(".judul").innerText=r.judul,i.querySelector(".deskripsi").innerText=r.ucapan.replace(/\n/g," ").replace(/\n+(?=\n\n)/g," ").replace(/\n+(?=\n)/g," ").substring(0,15)+"...",i.style.backgroundImage=`url(${r.foto})`,i.onclick=(()=>{const r=e.querySelector(".activated");r&&r.classList.remove("activated"),i.classList.add("activated"),n=a.key,t.classList.add("active")}),r.owner===auth.currentUser.uid&&"publik"!==r.pamerin&&e.appendChild(i)})}),rdb.ref("sresUtrak").child(auth.currentUser.uid).once("value",e=>{e.exists()||(r.querySelector('[data-kartu="author"]').innerHTML=a.haveNoCard)}),o(t,r,i,l)},o=(a,e,t,r)=>{a.onclick=(()=>{null!=n&&(a.classList.remove("active"),rdb.ref("rabmaGutrak").child(n).update({pamerin:"publik"}),n=null,e.remove(),l(t,r))})},l=(e,t)=>{e.innerHTML="",rdb.ref("rabmaGutrak").once("value",n=>{n.exists()&&n.forEach(n=>{let r=document.createElement("div");r.classList.add("kartu"),r.innerHTML=`\n                        <div class="tentang">\n                            <div class="metadata">\n                                <h3 data-kartu="judul">Loading</h3>\n                                <i data-kartu="kreator">Loading</i>\n                            </div>\n                            <div class="tombolan" data-kartu="tombol">\n                                <button class="deskripsi" data-button="lihat">${a.view} <i class="fa-solid fa-angles-right"></i></button>\n                            </div>\n                        </div>\n                        <div class="status">\n                            <button data-kartu="suka" class="suka">Loading</button>\n                            <button data-kartu="komentar" class="komentar interaksi">Loading</button>\n                        </div>\n                    `;const i=r.querySelector('[data-kartu="judul"]'),o=r.querySelector(".tentang .metadata"),l=r.querySelector('[data-kartu="kreator"]'),c=r.querySelector('[data-kartu="tombol"]'),k=r.querySelector('[data-kartu="suka"]'),m=r.querySelector('[data-kartu="komentar"]');i.innerText=n.val().judul,o.style.backgroundImage=`url(${n.val().foto})`,k.onclick=(()=>d(t,n,k,m)),r.querySelector('[data-button="lihat"]').onclick=(()=>window.open(`${window.location.origin}/kartu/?r=${n.key}`,"_blank")),u(e,t,n,l,c,m),s(t,n,k,m),"publik"===n.val().pamerin&&e.prepend(r)});const r=document.createElement("div");r.innerHTML=a.nomore,e.appendChild(r)})},d=(a,e,t,n)=>{rdb.ref("rabmaGutrak/"+e.key+"/akus/"+a.uid).once("value",r=>{r.exists()?rdb.ref("rabmaGutrak/"+e.key+"/akus").child(a.uid).remove():rdb.ref("rabmaGutrak/"+e.key+"/akus").child(a.uid).update({liked:!0}),s(a,e,t,n)})},u=(e,t,n,r,i,o)=>{if(rdb.ref("sresu").child(n.val().owner).once("value",a=>{let e=a.val().username||a.val().displayName;r.innerText=`Created by ${e}`||"Anonymous Card",o.onclick=(()=>c(t,e,o,n))}),n.val().owner===t.uid){const r=document.createElement("button");r.classList.add("hapus"),r.innerHTML=`${a.remove} <i class="fa-solid fa-trash"></i>`,r.onclick=(()=>Notipin.Confirm({msg:a.deletePost,type:"danger",onYes:()=>{rdb.ref("rabmaGutrak/"+n.key).update({pamerin:"private"}),l(e,t)}})),i.prepend(r)}},s=(e,t,n,r)=>{rdb.ref("rabmaGutrak/"+t.key+"/akus").once("value",r=>{r.exists()?rdb.ref("rabmaGutrak/"+t.key+"/akus/"+e.uid).once("value",e=>{e.exists()?n.innerHTML=`<i class="fa-solid fa-heart"></i> ${r.numChildren()} ${a.like}`:n.innerHTML=`<i class="fa-regular fa-heart"></i> ${r.numChildren()} ${a.like}`}):n.innerHTML=`<i class="fa-regular fa-heart"></i> 0 ${a.like}`}),rdb.ref("rabmaGutrak/"+t.key+"/ratnemok").once("value",e=>{e.exists()?r.innerHTML=`<i class="fa-regular fa-comment"></i> ${e.numChildren()} ${a.comment}`:r.innerHTML=`<i class="fa-regular fa-comment"></i> 0 ${a.comment}`})},c=(t,n,r,i)=>{const o=document.createElement("div");o.classList.add("Komentar"),o.innerHTML=`\n            <div class="komen-box">\n                <div class="komen-atas">\n                    <div data-kartu="author">\n                    </div>\n                    <button data-button="kembali"><i class="fa-solid fa-chevron-left"></i></button>\n                </div>\n                <div class="komen-tengah" data-kartu="daftar-komentar">\n                    LOADING . . .\n                </div>\n                <div class="komen-bawah">\n                    <input data-input="komentar" type="text" maxlength="100" placeholder="${a.typeHere}">\n                    <button data-button="kirim-komentar"><i class="fa-solid fa-angles-right"></i></button>\n                </div>\n            </div>\n        `,o.querySelector('[data-kartu="author"]').innerText=`${n}: ${i.val().judul}`,o.querySelector('[data-button="kembali"]').onclick=(()=>o.remove());const l=o.querySelector('[data-input="komentar"]'),d=o.querySelector('[data-button="kirim-komentar"]');e.appendChild(o),l.focus();const u=o.querySelector('[data-kartu="daftar-komentar"]');m(u,i.key),k(t,l,d,i.key,u)},k=(a,e,t,n,r)=>{e.onkeydown=(a=>{"13"==a.keyCode&&t.click()}),e.onkeyup=(()=>{e.value=e.value.replace(/^\s+/g,"").replace(/ +(?= )/g,"")}),t.onclick=(()=>{e.value.length<1||(rdb.ref("rabmaGutrak/"+n+"/ratnemok").child((new Date).getTime()).set({nama:a.uid,pesan:e.value}),e.value="",m(r,n))})},m=(e,t)=>{rdb.ref("rabmaGutrak/"+t+"/ratnemok").once("value",r=>{e.innerHTML="",r.exists()&&r.forEach(r=>{const i=document.createElement("div");i.classList.add("untai"),i.innerHTML=`\n                        <div class="nick" data-untai="nickname" data-malehoy="${r.key}"></div>\n                        <div data-untai="pesan"></div>\n                    `,i.querySelector('[data-untai="pesan"]').innerText=r.val().pesan,n(r.val().nama,i.querySelector('[data-untai="nickname"]'));const o=document.createElement("i");o.classList.add("fa-solid","fa-trash","hapus-element"),o.onclick=(()=>{Notipin.Confirm({msg:a.deleteComment,type:"danger",onYes:()=>{rdb.ref("rabmaGutrak/"+t+"/ratnemok/"+r.key).remove(),m(e,t)}})}),r.val().nama===auth.currentUser.uid&&i.appendChild(o),e.prepend(i)})});const n=(a,e)=>{rdb.ref("sresu").child(a).once("value",a=>{let t=a.val().username||a.val().displayName;e.innerText=t})}};auth.onAuthStateChanged(a=>{a?t(a):window.location.href=`${window.location.origin}/masuk/`})})();